<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üîê Admin ¬∑ L√¨ X√¨ Dashboard</title>
  <meta name="robots" content="noindex, nofollow" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif:wght@400;700&family=Noto+Sans:wght@300;400;600;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet" />
  <style>
:root{--bg-base:#0b0c14;--bg-card:#11121f;--bg-hover:#181929;--border:rgba(255,255,255,0.06);--border-gold:rgba(212,160,23,0.3);--border-red:rgba(192,57,43,0.35);--red:#c0392b;--red-light:#e74c3c;--gold:#d4a017;--gold-light:#f1c40f;--gold-shine:#ffd700;--text-primary:#e8e8f0;--text-secondary:#8888a0;--text-muted:#44445a;--green:#2ecc71;--blue:#3498db;--orange:#e67e22;--purple:#9b59b6;--sidebar-w:260px;--header-h:64px;--radius:14px}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html{font-size:15px}
body{font-family:'Noto Sans',sans-serif;background:var(--bg-base);color:var(--text-primary);min-height:100vh;overflow-x:hidden}
#login-screen{position:fixed;inset:0;background:linear-gradient(135deg,#0b0c14 0%,#15162a 50%,#0e0f1c 100%);display:flex;align-items:center;justify-content:center;z-index:9999;transition:opacity .5s,visibility .5s}
#login-screen.hidden{opacity:0;visibility:hidden;pointer-events:none}
.login-box{background:var(--bg-card);border:1px solid var(--border-gold);border-radius:24px;padding:55px 50px;width:min(420px,92vw);text-align:center;box-shadow:0 40px 80px rgba(0,0,0,.7),0 0 60px rgba(192,57,43,.08),inset 0 1px 0 rgba(255,255,255,.06);animation:loginAppear .6s cubic-bezier(.22,1,.36,1) both}
@keyframes loginAppear{from{opacity:0;transform:translateY(40px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}
.login-logo{font-size:3.5rem;margin-bottom:20px;display:block;animation:logoPulse 2s ease-in-out infinite}
@keyframes logoPulse{0%,100%{filter:drop-shadow(0 0 8px rgba(255,215,0,.4))}50%{filter:drop-shadow(0 0 20px rgba(255,215,0,.8))}}
.login-title{font-family:'Noto Serif',serif;font-size:1.6rem;color:var(--gold-shine);margin-bottom:6px}
.login-subtitle{font-size:.8rem;color:var(--text-secondary);letter-spacing:3px;text-transform:uppercase;margin-bottom:35px}
.login-field{margin-bottom:16px;text-align:left}
.login-field label{display:block;font-size:.75rem;color:var(--text-secondary);letter-spacing:2px;text-transform:uppercase;margin-bottom:7px}
.login-field input{width:100%;background:rgba(255,255,255,.04);border:1px solid var(--border);border-radius:10px;padding:13px 16px;color:var(--text-primary);font-family:'JetBrains Mono',monospace;font-size:.95rem;outline:none;transition:border-color .2s,box-shadow .2s}
.login-field input:focus{border-color:var(--gold);box-shadow:0 0 0 3px rgba(212,160,23,.12)}
.login-field input::placeholder{color:var(--text-muted)}
.login-error{color:var(--red-light);font-size:.82rem;margin-bottom:12px;min-height:20px}
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-8px)}75%{transform:translateX(8px)}}
.login-error.shake{animation:shake .3s ease}
.login-btn{width:100%;background:linear-gradient(135deg,var(--red),var(--red-light));color:#fff;border:none;padding:14px;border-radius:10px;font-size:1rem;font-weight:700;cursor:pointer;font-family:'Noto Sans',sans-serif;letter-spacing:1px;transition:all .25s;margin-top:5px;box-shadow:0 4px 20px rgba(192,57,43,.4)}
.login-btn:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(192,57,43,.5)}
.login-back{margin-top:20px;font-size:.82rem;color:var(--text-secondary)}
.login-back a{color:var(--gold);text-decoration:none}
.login-back a:hover{color:var(--gold-shine)}
#admin-app{display:none;min-height:100vh}
#admin-app.visible{display:flex}
.sidebar{width:var(--sidebar-w);background:var(--bg-card);border-right:1px solid var(--border);display:flex;flex-direction:column;position:fixed;top:0;left:0;bottom:0;z-index:100;overflow-y:auto;transition:transform .3s}
.sidebar-logo{padding:25px 24px 20px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:12px}
.sidebar-logo .logo-icon{font-size:1.8rem}
.sidebar-logo .logo-text{font-family:'Noto Serif',serif;font-size:1.05rem;color:var(--gold-shine);line-height:1.2}
.sidebar-logo .logo-sub{font-size:.68rem;color:var(--text-secondary);letter-spacing:2px;text-transform:uppercase}
.sidebar-nav{padding:16px 0;flex:1}
.nav-section{padding:0 12px;margin-bottom:8px}
.nav-section-label{font-size:.65rem;color:var(--text-muted);letter-spacing:3px;text-transform:uppercase;padding:8px 12px 6px}
.nav-link{display:flex;align-items:center;gap:12px;padding:11px 14px;border-radius:10px;text-decoration:none;color:var(--text-secondary);font-size:.9rem;transition:all .2s;cursor:pointer;border:none;background:none;width:100%;text-align:left}
.nav-link:hover{background:var(--bg-hover);color:var(--text-primary)}
.nav-link.active{background:rgba(192,57,43,.15);color:var(--gold)}
.nav-link .nav-icon{font-size:1.1rem;width:22px;text-align:center}
.nav-link .nav-badge{margin-left:auto;background:var(--red);color:#fff;font-size:.65rem;padding:2px 7px;border-radius:20px;font-weight:700}
.sidebar-footer{padding:16px 24px;border-top:1px solid var(--border)}
.sidebar-user{display:flex;align-items:center;gap:10px}
.user-avatar{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,var(--red),var(--gold));display:flex;align-items:center;justify-content:center;font-size:1rem}
.user-name{font-size:.88rem;color:var(--text-primary);font-weight:600}
.user-role{font-size:.72rem;color:var(--text-secondary)}
.logout-btn{margin-left:auto;background:none;border:none;cursor:pointer;font-size:1.1rem;opacity:.5;transition:opacity .2s}
.logout-btn:hover{opacity:1}
.main-content{margin-left:var(--sidebar-w);flex:1;display:flex;flex-direction:column;min-height:100vh}
.top-bar{height:var(--header-h);background:var(--bg-card);border-bottom:1px solid var(--border);display:flex;align-items:center;padding:0 30px;position:sticky;top:0;z-index:50;gap:20px}
.top-bar-title{font-family:'Noto Serif',serif;font-size:1.15rem;color:var(--text-primary);flex:1}
.top-bar-actions{display:flex;gap:10px;align-items:center}
.top-badge{background:rgba(192,57,43,.15);border:1px solid var(--border-red);color:var(--red-light);padding:5px 14px;border-radius:20px;font-size:.78rem;font-weight:600;letter-spacing:1px}
.icon-btn{background:rgba(255,255,255,.04);border:1px solid var(--border);color:var(--text-secondary);width:36px;height:36px;border-radius:9px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:1rem;transition:all .2s;text-decoration:none}
.icon-btn:hover{background:var(--bg-hover);color:var(--text-primary);border-color:rgba(255,255,255,.12)}
.content-area{padding:30px;flex:1;animation:slideIn .4s both}
@keyframes slideIn{from{opacity:0;transform:translateX(-20px)}to{opacity:1;transform:translateX(0)}}
.tab-section{display:none}
.tab-section.active{display:block}
.metrics-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:18px;margin-bottom:28px}
.metric-card{background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius);padding:22px 24px;position:relative;overflow:hidden;transition:all .25s}
.metric-card:hover{border-color:rgba(255,255,255,.12);transform:translateY(-2px);box-shadow:0 8px 30px rgba(0,0,0,.3)}
.metric-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;border-radius:var(--radius) var(--radius) 0 0}
.metric-card.gold::before{background:linear-gradient(90deg,var(--gold),var(--gold-shine))}
.metric-card.red::before{background:linear-gradient(90deg,var(--red),var(--red-light))}
.metric-card.green::before{background:linear-gradient(90deg,#27ae60,var(--green))}
.metric-card.blue::before{background:linear-gradient(90deg,#2980b9,var(--blue))}
.metric-card.purple::before{background:linear-gradient(90deg,#8e44ad,var(--purple))}
.metric-icon{font-size:1.6rem;margin-bottom:12px;display:block}
.metric-value{font-family:'Noto Serif',serif;font-size:2.2rem;font-weight:700;color:var(--text-primary);line-height:1;margin-bottom:5px}
.metric-label{font-size:.78rem;color:var(--text-secondary);letter-spacing:1px;text-transform:uppercase}
.metric-sub{position:absolute;top:22px;right:22px;font-size:.75rem;color:var(--text-muted);background:rgba(255,255,255,.04);padding:3px 10px;border-radius:20px;border:1px solid var(--border)}
.table-section{background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;margin-bottom:24px}
.table-header{padding:20px 24px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;gap:16px;flex-wrap:wrap}
.table-title{font-family:'Noto Serif',serif;font-size:1rem;color:var(--text-primary);display:flex;align-items:center;gap:10px}
.table-controls{display:flex;gap:10px;align-items:center}
.search-input{background:rgba(255,255,255,.04);border:1px solid var(--border);border-radius:8px;padding:8px 14px;color:var(--text-primary);font-size:.82rem;outline:none;transition:border-color .2s;width:200px}
.search-input:focus{border-color:var(--gold)}
.search-input::placeholder{color:var(--text-muted)}
.filter-select{background:rgba(255,255,255,.04);border:1px solid var(--border);border-radius:8px;padding:8px 12px;color:var(--text-primary);font-size:.82rem;outline:none;cursor:pointer}
.filter-select option{background:var(--bg-card)}
.data-table{width:100%;border-collapse:collapse;font-size:.88rem}
.data-table th{padding:12px 20px;text-align:left;font-size:.72rem;color:var(--text-muted);letter-spacing:2px;text-transform:uppercase;border-bottom:1px solid var(--border);background:rgba(255,255,255,.015);font-weight:600}
.data-table td{padding:14px 20px;border-bottom:1px solid var(--border);color:var(--text-secondary);transition:background .15s}
.data-table tr:last-child td{border-bottom:none}
.data-table tbody tr:hover td{background:var(--bg-hover)}
.badge{display:inline-flex;align-items:center;gap:5px;padding:4px 12px;border-radius:20px;font-size:.73rem;font-weight:600;letter-spacing:.5px}
.badge-opened{background:rgba(46,204,113,.12);color:var(--green);border:1px solid rgba(46,204,113,.2)}
.badge-pending{background:rgba(212,160,23,.12);color:var(--gold-light);border:1px solid rgba(212,160,23,.2)}
.badge-special{background:rgba(192,57,43,.15);color:var(--red-light);border:1px solid rgba(192,57,43,.25)}
.badge-normal{background:rgba(136,136,160,.1);color:var(--text-secondary);border:1px solid var(--border)}
.chart-section{display:grid;grid-template-columns:1fr 1fr;gap:18px;margin-bottom:24px}
@media(max-width:900px){.chart-section{grid-template-columns:1fr}}
.chart-card{background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius);padding:24px}
.chart-card-title{font-family:'Noto Serif',serif;font-size:.95rem;color:var(--text-primary);margin-bottom:20px}
.bar-row{margin-bottom:14px}
.bar-label-row{display:flex;justify-content:space-between;margin-bottom:6px;font-size:.8rem}
.bar-label-text{color:var(--text-secondary)}
.bar-label-val{color:var(--text-primary);font-weight:600;font-family:'JetBrains Mono',monospace}
.bar-track{height:8px;background:rgba(255,255,255,.05);border-radius:4px;overflow:hidden}
.bar-fill{height:100%;border-radius:4px;transition:width 1.2s cubic-bezier(.22,1,.36,1);min-width:4px}
.special-highlight{background:linear-gradient(135deg,rgba(192,57,43,.08),rgba(139,0,0,.05));border:1px solid var(--border-red);border-radius:var(--radius);padding:24px;margin-bottom:24px}
.special-highlight-title{font-family:'Noto Serif',serif;font-size:1rem;color:var(--red-light);margin-bottom:16px}
.special-cards-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:14px}
.special-env-card{background:rgba(192,57,43,.1);border:1px solid rgba(192,57,43,.25);border-radius:10px;padding:16px 18px;transition:all .2s}
.special-env-card:hover{border-color:rgba(192,57,43,.5);transform:translateY(-2px)}
.special-env-card .senv-num{font-size:.72rem;color:var(--text-muted);margin-bottom:6px}
.special-env-card .senv-display{font-size:.85rem;color:var(--text-secondary);margin-bottom:4px}
.special-env-card .senv-real{font-family:'Noto Serif',serif;font-size:1.5rem;font-weight:700;color:var(--gold-shine)}
.special-env-card .senv-status{margin-top:8px}
.settings-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:18px}
.settings-card{background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius);padding:24px}
.settings-card-title{font-family:'Noto Serif',serif;font-size:.95rem;color:var(--text-primary);margin-bottom:18px;display:flex;align-items:center;gap:8px}
.setting-row{display:flex;align-items:center;justify-content:space-between;padding:12px 0;border-bottom:1px solid var(--border)}
.setting-row:last-child{border-bottom:none}
.setting-label{font-size:.88rem;color:var(--text-secondary)}
.setting-value{font-family:'JetBrains Mono',monospace;font-size:.88rem;color:var(--gold);background:rgba(212,160,23,.08);padding:4px 12px;border-radius:6px;border:1px solid rgba(212,160,23,.2)}
.action-btn{display:inline-flex;align-items:center;gap:8px;padding:10px 20px;border-radius:9px;border:none;cursor:pointer;font-family:'Noto Sans',sans-serif;font-size:.85rem;font-weight:600;transition:all .2s;margin-top:14px;width:100%;justify-content:center}
.action-btn-red{background:rgba(192,57,43,.15);color:var(--red-light);border:1px solid rgba(192,57,43,.3)}
.action-btn-red:hover{background:rgba(192,57,43,.3)}
.action-btn-gold{background:rgba(212,160,23,.12);color:var(--gold);border:1px solid rgba(212,160,23,.25)}
.action-btn-gold:hover{background:rgba(212,160,23,.25)}
.action-btn-blue{background:rgba(52,152,219,.12);color:var(--blue);border:1px solid rgba(52,152,219,.25)}
.action-btn-blue:hover{background:rgba(52,152,219,.25)}
.toast{position:fixed;bottom:24px;right:24px;background:var(--bg-card);border:1px solid var(--border);border-radius:12px;padding:14px 20px;font-size:.88rem;color:var(--text-primary);box-shadow:0 8px 30px rgba(0,0,0,.5);z-index:9999;transform:translateX(120%);transition:transform .4s cubic-bezier(.22,1,.36,1);display:flex;align-items:center;gap:10px;min-width:240px}
.toast.show{transform:translateX(0)}
.toast.success{border-left:3px solid var(--green)}
.toast.error{border-left:3px solid var(--red-light)}
.toast.info{border-left:3px solid var(--gold)}
@media(max-width:768px){:root{--sidebar-w:0px}.sidebar{transform:translateX(-260px)}.sidebar.open{transform:translateX(0);width:260px}.main-content{margin-left:0}.content-area{padding:20px 16px}.metrics-grid{grid-template-columns:1fr 1fr}}
::-webkit-scrollbar{width:5px;height:5px}::-webkit-scrollbar-track{background:var(--bg-base)}::-webkit-scrollbar-thumb{background:rgba(255,255,255,.08);border-radius:3px}
  </style>
</head>
<body>

<!-- LOGIN SCREEN -->
<div id="login-screen">
  <div class="login-box">
    <span class="login-logo">üîê</span>
    <h1 class="login-title">Admin Dashboard</h1>
    <p class="login-subtitle">L√¨ X√¨ T·∫øt ¬∑ Qu·∫£n Tr·ªã</p>
    <form id="login-form" novalidate>
      <div class="login-field">
        <label for="login-user">T√™n ƒëƒÉng nh·∫≠p</label>
        <input type="text" id="login-user" placeholder="admin" autocomplete="username" required />
      </div>
      <div class="login-field">
        <label for="login-pass">M·∫≠t kh·∫©u</label>
        <input type="password" id="login-pass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" required />
      </div>
      <p class="login-error" id="login-error" role="alert"></p>
      <button type="submit" class="login-btn">üîì ƒêƒÉng Nh·∫≠p</button>
    </form>
    <p class="login-back">‚Üê <a href="/">Quay v·ªÅ trang ch∆°i</a></p>
  </div>
</div>

<!-- ADMIN APP -->
<div id="admin-app">
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-logo">
      <span class="logo-icon">üßß</span>
      <div>
        <div class="logo-text">L√¨ X√¨ Admin</div>
        <div class="logo-sub">T·∫øt 2025</div>
      </div>
    </div>
    <nav class="sidebar-nav">
      <div class="nav-section">
        <div class="nav-section-label">T·ªïng quan</div>
        <button class="nav-link active" data-tab="overview"><span class="nav-icon">üìä</span><span class="nav-label">Dashboard</span></button>
        <button class="nav-link" data-tab="envelopes"><span class="nav-icon">üßß</span><span class="nav-label">Phong b√¨</span><span class="nav-badge">2</span></button>
      </div>
      <div class="nav-section">
        <div class="nav-section-label">Ph√¢n t√≠ch</div>
        <button class="nav-link" data-tab="analytics"><span class="nav-icon">üìà</span><span class="nav-label">Th·ªëng k√™</span></button>
        <button class="nav-link" data-tab="special"><span class="nav-icon">‚≠ê</span><span class="nav-label">√î ƒë·∫∑c bi·ªát</span></button>
      </div>
      <div class="nav-section">
        <div class="nav-section-label">H·ªá th·ªëng</div>
        <button class="nav-link" data-tab="settings"><span class="nav-icon">‚öôÔ∏è</span><span class="nav-label">C√†i ƒë·∫∑t</span></button>
      </div>
    </nav>
    <div class="sidebar-footer">
      <div class="sidebar-user">
        <div class="user-avatar">A</div>
        <div><div class="user-name">Admin</div><div class="user-role">Qu·∫£n tr·ªã vi√™n</div></div>
        <button class="logout-btn" id="logout-btn" title="ƒêƒÉng xu·∫•t">‚èª</button>
      </div>
    </div>
  </aside>

  <main class="main-content">
    <div class="top-bar">
      <h2 class="top-bar-title" id="top-bar-title">Dashboard</h2>
      <div class="top-bar-actions">
        <span class="top-badge">üîí ADMIN</span>
        <button class="icon-btn" id="refresh-btn" title="L√†m m·ªõi">‚Ü∫</button>
        <button class="icon-btn" id="export-btn" title="Xu·∫•t CSV">üì•</button>
        <a class="icon-btn" href="/" title="Trang ch√≠nh">üè†</a>
      </div>
    </div>

    <div class="content-area">

      <!-- TAB: OVERVIEW -->
      <section class="tab-section active" id="tab-overview">
        <div class="metrics-grid">
          <div class="metric-card gold"><span class="metric-icon">üßß</span><div class="metric-value" id="m-total">20</div><div class="metric-label">T·ªïng s·ªë √¥</div><span class="metric-sub">C·ªë ƒë·ªãnh</span></div>
          <div class="metric-card green"><span class="metric-icon">‚úÖ</span><div class="metric-value" id="m-opened">0</div><div class="metric-label">ƒê√£ m·ªü</div></div>
          <div class="metric-card blue"><span class="metric-icon">‚è≥</span><div class="metric-value" id="m-pending">20</div><div class="metric-label">Ch∆∞a m·ªü</div></div>
          <div class="metric-card red"><span class="metric-icon">‚≠ê</span><div class="metric-value" id="m-special-opened">0/2</div><div class="metric-label">√î ƒë·∫∑c bi·ªát m·ªü</div></div>
        </div>
        <div class="metrics-grid" style="margin-bottom:28px">
          <div class="metric-card purple"><span class="metric-icon">üíµ</span><div class="metric-value" id="m-display-total">0k</div><div class="metric-label">T·ªïng hi·ªÉn th·ªã</div></div>
          <div class="metric-card gold"><span class="metric-icon">üí∞</span><div class="metric-value" id="m-real-total">0k</div><div class="metric-label">T·ªïng th·ª±c</div></div>
          <div class="metric-card blue"><span class="metric-icon">üìä</span><div class="metric-value" id="m-progress-pct">0%</div><div class="metric-label">Ti·∫øn ƒë·ªô</div></div>
        </div>
        <div class="chart-section">
          <div class="chart-card"><div class="chart-card-title">üìä Ph√¢n ph·ªëi m·ªánh gi√° th·ª±c</div><div id="chart-distribution"></div></div>
          <div class="chart-card"><div class="chart-card-title">üéØ T·ªâ l·ªá m·ªü</div><div id="chart-open-rate"></div></div>
        </div>
      </section>

      <!-- TAB: ENVELOPES -->
      <section class="tab-section" id="tab-envelopes">
        <div class="table-section">
          <div class="table-header">
            <div class="table-title"><span>üßß</span> Danh s√°ch phong b√¨</div>
            <div class="table-controls">
              <input type="search" class="search-input" id="env-search" placeholder="T√¨m ki·∫øm..." />
              <select class="filter-select" id="env-filter">
                <option value="all">T·∫•t c·∫£</option>
                <option value="opened">ƒê√£ m·ªü</option>
                <option value="pending">Ch∆∞a m·ªü</option>
                <option value="special">ƒê·∫∑c bi·ªát</option>
              </select>
            </div>
          </div>
          <table class="data-table">
            <thead><tr><th>ID</th><th>Lo·∫°i</th><th>Hi·ªÉn th·ªã</th><th>M·ªánh gi√° th·ª±c</th><th>Tr·∫°ng th√°i</th><th>Th·ªùi gian</th><th>Thao t√°c</th></tr></thead>
            <tbody id="env-tbody"></tbody>
          </table>
        </div>
      </section>

      <!-- TAB: ANALYTICS -->
      <section class="tab-section" id="tab-analytics">
        <div class="chart-section">
          <div class="chart-card"><div class="chart-card-title">üìä Chi ti·∫øt ph√¢n ph·ªëi</div><div id="chart-distribution-2"></div></div>
          <div class="chart-card"><div class="chart-card-title">üéØ T·ªâ l·ªá m·ªü</div><div id="chart-open-rate-2"></div></div>
        </div>
        <div class="table-section">
          <div class="table-header"><div class="table-title"><span>üìã</span> L·ªãch s·ª≠ b·ªëc</div></div>
          <table class="data-table">
            <thead><tr><th>ID</th><th>M·ªánh gi√° th·ª±c</th><th>Th·ªùi gian m·ªü</th><th>Lo·∫°i</th></tr></thead>
            <tbody id="history-tbody"></tbody>
          </table>
        </div>
      </section>

      <!-- TAB: SPECIAL -->
      <section class="tab-section" id="tab-special">
        <div class="special-highlight">
          <div class="special-highlight-title">‚≠ê √î ƒê·∫∑c Bi·ªát (50k &amp; 100k)</div>
          <p style="font-size:.85rem;color:var(--text-secondary);margin-bottom:20px">Ng∆∞·ªùi ch∆°i th·∫•y m·ªánh gi√° 1‚Äì20k, nh∆∞ng gi√° tr·ªã th·ª±c cao h∆°n. Khi m·ªü, h·ªá th·ªëng g·ª£i √Ω truy c·∫≠p /admin.</p>
          <div class="special-cards-grid" id="special-cards"></div>
        </div>
        <div class="chart-card">
          <div class="chart-card-title">‚ÑπÔ∏è C∆° ch·∫ø ho·∫°t ƒë·ªông</div>
          <div style="font-size:.88rem;color:var(--text-secondary);line-height:1.9">
            <p>üî∏ <strong style="color:var(--text-primary)">M·ªánh gi√° hi·ªÉn th·ªã:</strong> Ng∆∞·ªùi ch∆°i th·∫•y 1k‚Äì20k ng·∫´u nhi√™n khi b·ªëc.</p>
            <p>üî∏ <strong style="color:var(--text-primary)">M·ªánh gi√° th·ª±c:</strong> 2 √¥ ƒë·∫∑c bi·ªát c√≥ gi√° tr·ªã th·ª±c l√† 50k v√† 100k ‚Äî ch·ªâ admin bi·∫øt v·ªã tr√≠.</p>
            <p>üî∏ <strong style="color:var(--text-primary)">Khi m·ªü √¥ ƒë·∫∑c bi·ªát:</strong> H·ªá th·ªëng g·ª£i √Ω truy c·∫≠p <code style="color:var(--gold)">/admin</code> ƒë·ªÉ bi·∫øt m·ªánh gi√° th·ª±c.</p>
            <p>üî∏ <strong style="color:var(--text-primary)">B·∫£o m·∫≠t:</strong> Trang admin y√™u c·∫ßu ƒëƒÉng nh·∫≠p ƒë·ªÉ xem th√¥ng tin ·∫©n.</p>
          </div>
        </div>
      </section>

      <!-- TAB: SETTINGS -->
      <section class="tab-section" id="tab-settings">
        <div class="settings-grid">
          <div class="settings-card">
            <div class="settings-card-title">‚öôÔ∏è C·∫•u h√¨nh game</div>
            <div class="setting-row"><span class="setting-label">T·ªïng s·ªë √¥</span><span class="setting-value" id="cfg-total">20</span></div>
            <div class="setting-row"><span class="setting-label">S·ªë √¥ ƒë·∫∑c bi·ªát</span><span class="setting-value" id="cfg-special">2</span></div>
            <div class="setting-row"><span class="setting-label">M·ªánh gi√° t·ªëi thi·ªÉu</span><span class="setting-value" id="cfg-min">1k</span></div>
            <div class="setting-row"><span class="setting-label">M·ªánh gi√° t·ªëi ƒëa</span><span class="setting-value" id="cfg-max">20k</span></div>
            <div class="setting-row"><span class="setting-label">M·ªánh gi√° ·∫©n</span><span class="setting-value" id="cfg-hidden">50k, 100k</span></div>
          </div>
          <div class="settings-card">
            <div class="settings-card-title">üõ† Thao t√°c</div>
            <button class="action-btn action-btn-red" id="reset-game-btn">üîÑ ƒê·∫∑t l·∫°i to√†n b·ªô game</button>
            <button class="action-btn action-btn-gold" onclick="document.getElementById('export-btn').click()">üì• Xu·∫•t d·ªØ li·ªáu CSV</button>
            <button class="action-btn action-btn-blue" onclick="window.open('/','_blank')">üßß M·ªü trang ng∆∞·ªùi ch∆°i</button>
          </div>
          <div class="settings-card">
            <div class="settings-card-title">üîê B·∫£o m·∫≠t</div>
            <div class="setting-row"><span class="setting-label">Phi√™n ƒëƒÉng nh·∫≠p</span><span class="setting-value">SessionStorage</span></div>
            <div class="setting-row"><span class="setting-label">L∆∞u tr·ªØ</span><span class="setting-value">localStorage</span></div>
            <div class="setting-row"><span class="setting-label">Route admin</span><span class="setting-value">/admin</span></div>
            <button class="action-btn action-btn-red" onclick="document.getElementById('logout-btn').click()">‚èª ƒêƒÉng xu·∫•t</button>
          </div>
        </div>
      </section>

    </div>
  </main>
</div>

<div class="toast" id="toast" role="status" aria-live="polite"></div>

<script>
'use strict';
const ADMIN={username:'admin',password:'lix√¨2025',sessionKey:'lix√¨_admin_auth'};
const DATA_KEY='lix√¨_game_data';
const loginScreen=document.getElementById('login-screen');
const adminApp=document.getElementById('admin-app');
const loginError=document.getElementById('login-error');
const loginForm=document.getElementById('login-form');
function checkSession(){return sessionStorage.getItem(ADMIN.sessionKey)==='true'}
function saveSession(){sessionStorage.setItem(ADMIN.sessionKey,'true')}
function clearSession(){sessionStorage.removeItem(ADMIN.sessionKey)}
function loadGameData(){const r=localStorage.getItem(DATA_KEY);if(!r)return generateDemoData();try{return JSON.parse(r)}catch{return generateDemoData()}}
function generateDemoData(){const v=[1,2,2,3,3,5,5,5,10,10,10,10,15,15,20,20,20,20,20,20];const s=[...v].sort(()=>Math.random()-.5);const sp=[];while(sp.length<2){const r=Math.floor(Math.random()*20);if(!sp.includes(r))sp.push(r)}const sv=[50,100].sort(()=>Math.random()-.5);return Array.from({length:20},(_,i)=>{const isSp=sp.includes(i);const si=sp.indexOf(i);const opened=Math.random()>.55;return{id:i+1,displayValue:s[i],realValue:isSp?sv[si]:s[i],isSpecial:isSp,opened,openedAt:opened?new Date(Date.now()-Math.random()*3600000).toISOString():null}})}
function saveDemoData(d){localStorage.setItem(DATA_KEY,JSON.stringify(d))}
document.addEventListener('DOMContentLoaded',()=>{if(checkSession())showDashboard();else{loginScreen.classList.remove('hidden')}});
loginForm.addEventListener('submit',e=>{e.preventDefault();const u=document.getElementById('login-user').value.trim();const p=document.getElementById('login-pass').value;if(u===ADMIN.username&&p===ADMIN.password){loginError.textContent='';loginScreen.classList.add('hidden');saveSession();showDashboard()}else{loginError.textContent='‚ö† Sai t√™n ƒëƒÉng nh·∫≠p ho·∫∑c m·∫≠t kh·∫©u!';loginError.classList.remove('shake');void loginError.offsetWidth;loginError.classList.add('shake');document.getElementById('login-pass').value='';document.getElementById('login-pass').focus()}});
let gameData=[];
function showDashboard(){adminApp.classList.add('visible');gameData=loadGameData();saveDemoData(gameData);renderMetrics();renderEnvelopeTable();renderSpecialHighlight();renderCharts();renderSettings();setupNav();setupControls()}
function renderMetrics(){const tot=gameData.length;const op=gameData.filter(e=>e.opened).length;const sp=gameData.filter(e=>e.isSpecial);const spOp=sp.filter(e=>e.opened).length;const totDisp=gameData.filter(e=>e.opened).reduce((s,e)=>s+e.displayValue,0);const totReal=gameData.filter(e=>e.opened).reduce((s,e)=>s+e.realValue,0);document.getElementById('m-total').textContent=tot;document.getElementById('m-opened').textContent=op;document.getElementById('m-pending').textContent=tot-op;document.getElementById('m-special-opened').textContent=spOp+'/'+sp.length;document.getElementById('m-display-total').textContent=totDisp+'k';document.getElementById('m-real-total').textContent=totReal+'k';document.getElementById('m-progress-pct').textContent=Math.round(op/tot*100)+'%'}
function renderEnvelopeTable(fv='all',sv=''){const tb=document.getElementById('env-tbody');tb.innerHTML='';let d=[...gameData];if(fv==='opened')d=d.filter(e=>e.opened);if(fv==='pending')d=d.filter(e=>!e.opened);if(fv==='special')d=d.filter(e=>e.isSpecial);if(sv){const s=sv.toLowerCase();d=d.filter(e=>String(e.id).includes(s)||String(e.displayValue).includes(s)||String(e.realValue).includes(s))}d.forEach(env=>{const tr=document.createElement('tr');tr.innerHTML=`<td style="font-family:'JetBrains Mono',monospace;color:var(--text-primary)">#${String(env.id).padStart(2,'0')}</td><td><span class="badge ${env.isSpecial?'badge-special':'badge-normal'}">${env.isSpecial?'üî• ƒê·∫∑c bi·ªát':'üì¶ Th∆∞·ªùng'}</span></td><td style="font-family:'JetBrains Mono',monospace">${env.displayValue}k</td><td style="font-family:'JetBrains Mono',monospace;color:${env.isSpecial?'var(--gold-shine)':'var(--text-secondary)'}">${env.realValue}k ${env.isSpecial?'‚≠ê':''}</td><td><span class="badge ${env.opened?'badge-opened':'badge-pending'}">${env.opened?'‚úì ƒê√£ m·ªü':'‚óã Ch·ªù'}</span></td><td style="font-size:.8rem;color:var(--text-muted)">${env.openedAt?new Date(env.openedAt).toLocaleTimeString('vi-VN'):'‚Äî'}</td><td><button class="icon-btn" onclick="toggleEnv(${env.id-1})">${env.opened?'‚Ü∫':'‚úì'}</button></td>`;tb.appendChild(tr)});if(d.length===0)tb.innerHTML='<tr><td colspan="7" style="text-align:center;color:var(--text-muted);padding:30px">Kh√¥ng c√≥ d·ªØ li·ªáu</td></tr>'}
function renderSpecialHighlight(){const c=document.getElementById('special-cards');c.innerHTML='';gameData.filter(e=>e.isSpecial).forEach(env=>{const card=document.createElement('div');card.className='special-env-card';card.innerHTML=`<div class="senv-num">√î s·ªë #${String(env.id).padStart(2,'0')}</div><div class="senv-display">Hi·ªÉn th·ªã: ${env.displayValue}k</div><div class="senv-real">${env.realValue}k üèÜ</div><div class="senv-status"><span class="badge ${env.opened?'badge-opened':'badge-pending'}">${env.opened?'‚úì ƒê√£ ƒë∆∞·ª£c b·ªëc':'‚óã Ch∆∞a m·ªü'}</span></div>`;c.appendChild(card)})}
function renderCharts(){const dist={1:0,2:0,3:0,5:0,10:0,15:0,20:0,50:0,100:0};gameData.forEach(e=>{if(dist[e.realValue]!==undefined)dist[e.realValue]++;else dist[e.realValue]=1});const dc=document.getElementById('chart-distribution');dc.innerHTML='';const mx=Math.max(...Object.values(dist));const colors={1:'#8888a0',2:'#8888a0',3:'#8888a0',5:'#3498db',10:'#3498db',15:'#9b59b6',20:'#e67e22',50:'#e74c3c',100:'#ffd700'};Object.entries(dist).forEach(([v,c])=>{if(c===0)return;const row=document.createElement('div');row.className='bar-row';row.innerHTML=`<div class="bar-label-row"><span class="bar-label-text">${v}k</span><span class="bar-label-val">${c} √¥</span></div><div class="bar-track"><div class="bar-fill" style="width:0%;background:${colors[v]||'#8888a0'}" data-w="${c/mx*100}"></div></div>`;dc.appendChild(row)});const op=gameData.filter(e=>e.opened).length;const pend=gameData.length-op;const oc=document.getElementById('chart-open-rate');oc.innerHTML=`<div class="bar-row"><div class="bar-label-row"><span class="bar-label-text">ƒê√£ m·ªü</span><span class="bar-label-val">${op}</span></div><div class="bar-track"><div class="bar-fill" style="width:0%;background:linear-gradient(90deg,#27ae60,#2ecc71)" data-w="${op/20*100}"></div></div></div><div class="bar-row"><div class="bar-label-row"><span class="bar-label-text">Ch∆∞a m·ªü</span><span class="bar-label-val">${pend}</span></div><div class="bar-track"><div class="bar-fill" style="width:0%;background:linear-gradient(90deg,#d4a017,#f1c40f)" data-w="${pend/20*100}"></div></div></div>`;setTimeout(()=>{document.querySelectorAll('.bar-fill').forEach(el=>{el.style.width=el.dataset.w+'%'})},200)}
function renderSettings(){const sp=gameData.filter(e=>e.isSpecial);const s=(id,v)=>{const e=document.getElementById(id);if(e)e.textContent=v};s('cfg-total',gameData.length);s('cfg-special',sp.length);s('cfg-min','1k');s('cfg-max','20k');s('cfg-hidden',sp.map(e=>e.realValue+'k').join(', '))}
function setupNav(){document.querySelectorAll('[data-tab]').forEach(link=>{link.addEventListener('click',()=>{document.querySelectorAll('[data-tab]').forEach(l=>l.classList.remove('active'));link.classList.add('active');const tab=link.dataset.tab;document.querySelectorAll('.tab-section').forEach(s=>s.classList.remove('active'));const t=document.getElementById('tab-'+tab);if(t)t.classList.add('active');document.getElementById('top-bar-title').textContent=link.querySelector('.nav-label')?.textContent||'Dashboard';if(tab==='analytics')renderHistory()})})}
function setupControls(){const search=document.getElementById('env-search');const filter=document.getElementById('env-filter');if(search)search.addEventListener('input',()=>renderEnvelopeTable(filter?.value,search.value));if(filter)filter.addEventListener('change',()=>renderEnvelopeTable(filter.value,search?.value));document.getElementById('logout-btn')?.addEventListener('click',()=>{clearSession();window.location.reload()});document.getElementById('reset-game-btn')?.addEventListener('click',()=>{if(confirm('ƒê·∫∑t l·∫°i to√†n b·ªô game?')){gameData.forEach(e=>{e.opened=false;e.openedAt=null});saveDemoData(gameData);renderMetrics();renderEnvelopeTable();renderSpecialHighlight();renderCharts();showToast('‚úì ƒê√£ ƒë·∫∑t l·∫°i game','success')}});document.getElementById('refresh-btn')?.addEventListener('click',()=>{gameData=loadGameData();renderMetrics();renderEnvelopeTable();renderSpecialHighlight();renderCharts();showToast('‚Ü∫ ƒê√£ l√†m m·ªõi d·ªØ li·ªáu','info')});document.getElementById('export-btn')?.addEventListener('click',exportCSV)}
window.toggleEnv=function(idx){if(idx<0||idx>=gameData.length)return;gameData[idx].opened=!gameData[idx].opened;gameData[idx].openedAt=gameData[idx].opened?new Date().toISOString():null;saveDemoData(gameData);renderMetrics();renderEnvelopeTable(document.getElementById('env-filter')?.value,document.getElementById('env-search')?.value);renderSpecialHighlight();renderCharts();showToast(`${gameData[idx].opened?'‚úì ƒê√°nh d·∫•u ƒë√£ m·ªü':'‚Ü∫ ƒê·∫∑t l·∫°i'} √¥ #${String(gameData[idx].id).padStart(2,'0')}`,'success')}
function renderHistory(){const tb=document.getElementById('history-tbody');if(!tb)return;const opened=gameData.filter(e=>e.opened&&e.openedAt).sort((a,b)=>new Date(a.openedAt)-new Date(b.openedAt));tb.innerHTML=opened.map(e=>`<tr><td style="font-family:'JetBrains Mono',monospace;color:var(--text-primary)">#${String(e.id).padStart(2,'0')}</td><td style="font-family:'JetBrains Mono',monospace;color:${e.isSpecial?'var(--gold-shine)':'var(--text-primary)'}">${e.realValue}k ${e.isSpecial?'‚≠ê':''}</td><td style="font-size:.82rem;color:var(--text-muted)">${new Date(e.openedAt).toLocaleString('vi-VN')}</td><td><span class="badge ${e.isSpecial?'badge-special':'badge-normal'}">${e.isSpecial?'üî• ƒê·∫∑c bi·ªát':'üì¶ Th∆∞·ªùng'}</span></td></tr>`).join('');if(opened.length===0)tb.innerHTML='<tr><td colspan="4" style="text-align:center;color:var(--text-muted);padding:30px">Ch∆∞a c√≥ √¥ n√†o ƒë∆∞·ª£c m·ªü</td></tr>'}
function exportCSV(){const h=['ID','Lo·∫°i','M·ªánh gi√° hi·ªÉn th·ªã','M·ªánh gi√° th·ª±c','Tr·∫°ng th√°i','Th·ªùi gian m·ªü'];const rows=gameData.map(e=>['#'+String(e.id).padStart(2,'0'),e.isSpecial?'ƒê·∫∑c bi·ªát':'Th∆∞·ªùng',e.displayValue+'k',e.realValue+'k',e.opened?'ƒê√£ m·ªü':'Ch∆∞a m·ªü',e.openedAt?new Date(e.openedAt).toLocaleString('vi-VN'):'‚Äî']);const csv=[h,...rows].map(r=>r.join(',')).join('\n');const blob=new Blob(['\ufeff'+csv],{type:'text/csv;charset=utf-8'});const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download=`lixi-data-${new Date().toLocaleDateString('vi-VN').replaceAll('/','-')}.csv`;a.click();showToast('üì• ƒê√£ xu·∫•t CSV','success')}
const toastEl=document.getElementById('toast');let toastTimer;
function showToast(msg,type='info'){if(!toastEl)return;toastEl.textContent=msg;toastEl.className=`toast ${type} show`;clearTimeout(toastTimer);toastTimer=setTimeout(()=>toastEl.classList.remove('show'),3000)}
</script>
</body>
</html>
